<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
	<head>
		<title th:text="${title}"></title>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel='stylesheet' id='google-fonts-css'  href='http://fonts.googleapis.com/css?family=Playfair+Display%7COpen+Sans+Condensed%3A300%7COpen+Sans%7CShadows+Into+Light%7CMuli%7CDroid+Sans%7CArbutus+Slab%7CAbel&#038;ver=3.5.1' type='text/css' media='all' />
		<link rel="stylesheet" media="all" th:href="@{/styles/bootstrap.css}">
		<link rel="stylesheet" media="all" th:href="@{/styles/main.css}">
		<script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
		<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
	</head>
	<body>
		<div class="container">
			<!--*** Header ***-->
			<div th:replace="~{fragments/header}"></div>

			<!--*** Map ***-->
			<div id="map" class="mb-3"></div>

			<form th:object="${pointRequestModel}" th:action="@{/point-create}" method="post">
				<div class="row">
					<div class="col-lg-4 form-group">
						<div class="card border-primary">
							<legend class="card-header">Обект</legend>
							<div class="col-sm-8">
								<label class="col-form-label" for="pointName">Име</label>
								<input th:field="*{pointName}" type="text" class="form-control" placeholder="Име на обекта..." id="pointName">
							</div>
							<div class="col-sm-4 mb-3">
								<label class="col-form-label" for="pointID">ID</label>
								<input th:field="*{pointIdentifier}" type="text" class="form-control" placeholder="ID на обекта..." id="pointID">
							</div>
						</div>
					</div>
					<div class="col-lg-4 form-group">
						<div class="card border-primary">
							<legend class="card-header">Адрес</legend>
							<div class="col-sm-5">
								<label class="col-form-label" for="inputDefault">Населено място</label>
								<select th:field="*{place}" class="custom-select">
									<option th:each="p : *{places}" 
											th:value="${p.id}"
											th:text="${p.name}">
									</option>
								</select>
							</div>
							<div class="form-group col-sm-12 input-group-append">
								<div class="col-7">
									<label class="col-form-label" for="street">Улица</label>
									<input th:field="*{address.street}" type="text" class="form-control" placeholder="..." id="street">
								</div>
								<div>
									<label class="col-form-label" for="num">№</label>
									<input th:field="*{address.number}" type="text" class="form-control" placeholder="..." id="num">
								</div>
								<div>
									<label class="col-form-label" for="entrance">Вх.</label>
									<input th:field="*{address.entrance}" type="text" class="form-control" placeholder="..." id="entrance">
								</div>
								<div>
									<label class="col-form-label" for="floor">Ет.</label>
									<input th:field="*{address.floor}" type="text" class="form-control" placeholder="..." id="floor">
								</div>
							</div>
							<div class="form-group col-sm-12">
								<div th:if="${#fields.hasErrors('address.street')}" th:errors="*{address.street}" style="color:red;">Street Error</div>
								<div th:if="${#fields.hasErrors('address.number')}" th:errors="*{address.number}" style="color:red;">Number Error</div>
								<div th:if="${#fields.hasErrors('address.entrance')}" th:errors="*{address.entrance}" style="color:red;">Entrance Error</div>
								<div th:if="${#fields.hasErrors('address.floor')}" th:errors="*{address.floor}" style="color:red;">Floor Error</div>
							</div>
						</div>
					</div>
					<div class="col-lg-4 form-group">
						<div class="card border-primary">
							<legend class="card-header">Контролна платка</legend>
							<div class="col-sm-5">
								<label class="col-form-label" for="inputDefault">Марка</label>
								<select th:field="*{controlBoardBrand}" class="custom-select">
									<option th:each="brand : *{brands}" 
											th:value="${brand.id}"
											th:text="${brand.name}">
									</option>
								</select>
							</div>
							<div class="form-group col-sm-5">
								<label class="col-form-label" for="cBModel">Модел</label>
								<input th:field="*{controlBoardModel}" type="text" class="form-control" placeholder="..." id="cBModel">
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 form-group">
						<button type="submit" class="btn btn-primary btn-lg">Запази</button>
					</div>
				</div>
			</form>
		</div>
		<script>
			var marker;
			var map
			function initMap() {

				map = new google.maps.Map(document.getElementById('map'), {
					center: {lat: 41.562945, lng: 23.2725755},
					center: new google.maps.LatLng(41.562945, 23.2725755),
					zoom: 15,
					styles: [
						{"featureType": "all",
							"elementType": "labels",
							"stylers": [
								{"visibility": "off"}
							]
						},
						{"featureType": "administrative",
							"elementType": "all",
							"stylers": [
								{"visibility": "simplified"},
								{"color": "#5b6571"},
								{"lightness": "35"}]
						},
						{"featureType": "road",
							"elementType": "labels",
							"stylers": [{"visibility": "on"}]},
					]
				});
				google.maps.event.addListener(map, 'click', function (event) {

					marker = new google.maps.Marker({
						position: event.latLng,
						map: map
					});
				});
//				var mapLabel = new google.maps.MapLabel({
//					text: 'Test',
//					position: new google.maps.LatLng(41.562945, 23.2725755),
//					map: map,
//					fontSize: 35,
//					align: 'right'
//				});
			}

		</script>
		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC46e-kbgkWJWSVadj7q-K8LwVbc2Hp8hc&callback=initMap"></script>
	</body>
</html>
